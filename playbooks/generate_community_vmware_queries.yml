---
- name: Generate audit query file for community.vmware collection
  hosts: localhost
  gather_facts: false
  
  tasks:
    - name: Generate query file for community.vmware collection
      jonnyfiveiq.query_file_generator.generate_query_file:
        collection_source: "https://github.com/ansible-collections/community.vmware"
        collection_name: "community.vmware"
        output_path: "./community_vmware_event_query.yml"
      register: result
    
    - name: Display results
      ansible.builtin.debug:
        msg: |
          Generated: {{ result.query_file_path }}
          Modules analyzed: {{ result.modules_analyzed }}
          Successfully parsed: {{ result.successful_parses | default('N/A') }}
          Collection: {{ result.collection_info.name }}
